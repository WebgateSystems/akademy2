<header class="dashboard-top-bar">
  <button class="dashboard-sidebar-toggle" type="button" aria-label="Toggle navigation" data-sidebar-toggle>
    <%= image_tag "icons/social/M/burger.svg", alt: "", width: "24", height: "24", "data-theme-icon": true %>
  </button>
  <h1><%= local_assigns[:title] || (@current_class ? "#{@current_class.name} (#{@school&.current_academic_year_value || '2025/2026'})" : "Dashboard") %></h1>
  <div class="dashboard-top-actions">
    <% if local_assigns[:back_path] %>
      <%= link_to back_path, class: "icon-pill", "aria-label": "Wróć" do %>
        <i class="bi bi-arrow-left" aria-hidden="true"></i>
      <% end %>
    <% end %>
    <% if can_access_management? %>
      <%= link_to management_root_path, class: "icon-pill", "aria-label": "School management", title: "Panel zarządzania szkołą" do %>
        <i class="bi bi-clipboard-data" aria-hidden="true"></i>
      <% end %>
    <% end %>
    <a class="icon-pill" href="#" aria-label="Notifications">
      <span class="notification-counter" data-notifications-count style="display: none;" aria-hidden="true">0</span>
      <%= image_tag "icons/social/M/notifications.svg", alt: "", "data-theme-icon": true %>
    </a>
    <%= render 'shared/theme_toggle' %>
    <% if current_user %>
      <div class="settings-control">
        <%= button_to destroy_user_session_path, method: :delete, class: "icon-pill", "aria-label": "Logout", form: { class: "m-0 p-0" } do %>
          <%= image_tag "icons/social/M/logout.svg", alt: "", "data-theme-icon": true %>
        <% end %>
      </div>
    <% end %>
  </div>
</header>
